{"ast":null,"code":"// Historical Data Analyzer - Learn from past RFPs\nexport class HistoricalDataAnalyzer {\n  constructor() {\n    this.historicalData = [];\n    this.vendorPerformance = new Map();\n    this.priceHistory = [];\n    this.winPatterns = [];\n  }\n\n  // Add historical RFP data\n  addHistoricalRFP(rfpData) {\n    const record = {\n      id: rfpData.id || `HIST_${Date.now()}`,\n      timestamp: rfpData.timestamp || new Date().toISOString(),\n      rfpTitle: rfpData.rfpTitle,\n      vendor: rfpData.vendor,\n      finalPrice: rfpData.finalPrice,\n      matchScore: rfpData.matchScore,\n      status: rfpData.status,\n      // 'Won', 'Lost', 'Pending'\n      area: rfpData.area,\n      requirements: rfpData.requirements,\n      deadline: rfpData.deadline,\n      responseTime: rfpData.responseTime\n    };\n    this.historicalData.push(record);\n    this.updateVendorPerformance(record);\n    this.updatePriceHistory(record);\n    if (record.status === 'Won' || record.status === 'Lost') {\n      this.updateWinPatterns(record);\n    }\n  }\n\n  // Update vendor performance metrics\n  updateVendorPerformance(record) {\n    if (!this.vendorPerformance.has(record.vendor)) {\n      this.vendorPerformance.set(record.vendor, {\n        vendor: record.vendor,\n        totalBids: 0,\n        wins: 0,\n        losses: 0,\n        pending: 0,\n        totalValue: 0,\n        avgMatchScore: 0,\n        avgPrice: 0,\n        avgResponseTime: 0,\n        matchScores: [],\n        prices: [],\n        responseTimes: []\n      });\n    }\n    const performance = this.vendorPerformance.get(record.vendor);\n    performance.totalBids++;\n    if (record.status === 'Won') performance.wins++;\n    if (record.status === 'Lost') performance.losses++;\n    if (record.status === 'Pending') performance.pending++;\n    performance.totalValue += record.finalPrice || 0;\n    performance.matchScores.push(record.matchScore);\n    performance.prices.push(record.finalPrice);\n    if (record.responseTime) performance.responseTimes.push(record.responseTime);\n\n    // Calculate averages\n    performance.avgMatchScore = performance.matchScores.reduce((a, b) => a + b, 0) / performance.matchScores.length;\n    performance.avgPrice = performance.prices.reduce((a, b) => a + b, 0) / performance.prices.length;\n    performance.avgResponseTime = performance.responseTimes.length > 0 ? performance.responseTimes.reduce((a, b) => a + b, 0) / performance.responseTimes.length : 0;\n    performance.winRate = performance.totalBids > 0 ? performance.wins / performance.totalBids * 100 : 0;\n  }\n\n  // Update price history for forecasting\n  updatePriceHistory(record) {\n    this.priceHistory.push({\n      timestamp: record.timestamp,\n      vendor: record.vendor,\n      price: record.finalPrice,\n      area: record.area,\n      pricePerSqFt: record.area > 0 ? record.finalPrice / record.area : 0\n    });\n\n    // Keep only last 100 records for performance\n    if (this.priceHistory.length > 100) {\n      this.priceHistory.shift();\n    }\n  }\n\n  // Update win patterns\n  updateWinPatterns(record) {\n    this.winPatterns.push({\n      matchScore: record.matchScore,\n      price: record.finalPrice,\n      area: record.area,\n      vendor: record.vendor,\n      won: record.status === 'Won'\n    });\n  }\n\n  // Get vendor performance report\n  getVendorPerformance(vendorName) {\n    return this.vendorPerformance.get(vendorName) || null;\n  }\n\n  // Get all vendor performances ranked\n  getRankedVendors() {\n    const vendors = Array.from(this.vendorPerformance.values());\n    return vendors.sort((a, b) => b.winRate - a.winRate);\n  }\n\n  // Predict win probability based on historical data\n  predictWinProbability(matchScore, price, vendor) {\n    if (this.winPatterns.length < 5) {\n      // Not enough data, use baseline\n      return this.calculateBaselineWinProbability(matchScore, price);\n    }\n\n    // Find similar historical cases\n    const similarCases = this.winPatterns.filter(pattern => {\n      const matchScoreDiff = Math.abs(pattern.matchScore - matchScore);\n      const priceDiff = Math.abs(pattern.price - price) / price;\n      return matchScoreDiff < 15 && priceDiff < 0.3;\n    });\n    if (similarCases.length === 0) {\n      return this.calculateBaselineWinProbability(matchScore, price);\n    }\n\n    // Calculate win rate from similar cases\n    const wins = similarCases.filter(c => c.won).length;\n    const historicalWinRate = wins / similarCases.length * 100;\n\n    // Adjust based on vendor performance\n    const vendorPerf = this.getVendorPerformance(vendor);\n    const vendorAdjustment = vendorPerf ? (vendorPerf.winRate - 50) * 0.2 : 0;\n    return Math.min(Math.max(historicalWinRate + vendorAdjustment, 0), 100);\n  }\n\n  // Calculate baseline win probability\n  calculateBaselineWinProbability(matchScore, price) {\n    // Simple heuristic when no historical data\n    let probability = 50; // Start at 50%\n\n    // Match score contribution\n    if (matchScore >= 90) probability += 30;else if (matchScore >= 80) probability += 20;else if (matchScore >= 70) probability += 10;else if (matchScore < 60) probability -= 20;\n\n    // Price contribution (assuming lower is better)\n    if (price < 50000) probability += 10;else if (price > 100000) probability -= 10;\n    return Math.min(Math.max(probability, 0), 100);\n  }\n\n  // Forecast price trends\n  forecastPrice(area, vendor = null) {\n    if (this.priceHistory.length < 3) {\n      return {\n        forecast: null,\n        confidence: 'Low',\n        message: 'Insufficient historical data'\n      };\n    }\n\n    // Filter by vendor if specified\n    let relevantHistory = vendor ? this.priceHistory.filter(h => h.vendor === vendor) : this.priceHistory;\n    if (relevantHistory.length < 3) {\n      relevantHistory = this.priceHistory; // Fall back to all data\n    }\n\n    // Calculate average price per sq ft\n    const avgPricePerSqFt = relevantHistory.reduce((sum, h) => sum + h.pricePerSqFt, 0) / relevantHistory.length;\n\n    // Calculate trend (simple linear regression)\n    const trend = this.calculatePriceTrend(relevantHistory);\n\n    // Forecast\n    const basePrice = avgPricePerSqFt * area;\n    const trendAdjustment = trend * area;\n    const forecast = basePrice + trendAdjustment;\n\n    // Calculate confidence based on data consistency\n    const variance = this.calculateVariance(relevantHistory.map(h => h.pricePerSqFt));\n    const confidence = variance < 10 ? 'High' : variance < 50 ? 'Medium' : 'Low';\n    return {\n      forecast: Math.round(forecast),\n      basePrice: Math.round(basePrice),\n      trendAdjustment: Math.round(trendAdjustment),\n      avgPricePerSqFt: avgPricePerSqFt.toFixed(2),\n      confidence: confidence,\n      dataPoints: relevantHistory.length,\n      trend: trend > 0 ? 'Increasing' : trend < 0 ? 'Decreasing' : 'Stable'\n    };\n  }\n\n  // Calculate price trend\n  calculatePriceTrend(priceHistory) {\n    if (priceHistory.length < 2) return 0;\n    const recentPrices = priceHistory.slice(-10); // Last 10 data points\n    const n = recentPrices.length;\n    let sumX = 0,\n      sumY = 0,\n      sumXY = 0,\n      sumX2 = 0;\n    recentPrices.forEach((point, i) => {\n      sumX += i;\n      sumY += point.pricePerSqFt;\n      sumXY += i * point.pricePerSqFt;\n      sumX2 += i * i;\n    });\n    const slope = (n * sumXY - sumX * sumY) / (n * sumX2 - sumX * sumX);\n    return slope;\n  }\n\n  // Calculate variance\n  calculateVariance(values) {\n    const mean = values.reduce((a, b) => a + b, 0) / values.length;\n    const squaredDiffs = values.map(value => Math.pow(value - mean, 2));\n    return squaredDiffs.reduce((a, b) => a + b, 0) / values.length;\n  }\n\n  // Get insights from historical data\n  getInsights() {\n    const insights = [];\n\n    // Vendor insights\n    const topVendor = this.getRankedVendors()[0];\n    if (topVendor) {\n      insights.push({\n        type: 'vendor_performance',\n        message: `${topVendor.vendor} has the highest win rate at ${topVendor.winRate.toFixed(1)}%`,\n        data: topVendor\n      });\n    }\n\n    // Price insights\n    if (this.priceHistory.length >= 5) {\n      const recentPrices = this.priceHistory.slice(-5);\n      const avgRecent = recentPrices.reduce((sum, h) => sum + h.pricePerSqFt, 0) / recentPrices.length;\n      const olderPrices = this.priceHistory.slice(0, -5);\n      const avgOlder = olderPrices.reduce((sum, h) => sum + h.pricePerSqFt, 0) / olderPrices.length;\n      const change = (avgRecent - avgOlder) / avgOlder * 100;\n      if (Math.abs(change) > 5) {\n        insights.push({\n          type: 'price_trend',\n          message: `Prices have ${change > 0 ? 'increased' : 'decreased'} by ${Math.abs(change).toFixed(1)}% recently`,\n          data: {\n            change,\n            avgRecent,\n            avgOlder\n          }\n        });\n      }\n    }\n\n    // Win pattern insights\n    if (this.winPatterns.length >= 10) {\n      const wonCases = this.winPatterns.filter(p => p.won);\n      const avgWinningMatchScore = wonCases.reduce((sum, p) => sum + p.matchScore, 0) / wonCases.length;\n      insights.push({\n        type: 'win_pattern',\n        message: `RFPs with match scores above ${avgWinningMatchScore.toFixed(0)}% have higher win rates`,\n        data: {\n          avgWinningMatchScore,\n          totalWins: wonCases.length\n        }\n      });\n    }\n    return insights;\n  }\n\n  // Export historical data\n  exportData() {\n    return {\n      historicalRFPs: this.historicalData,\n      vendorPerformance: Array.from(this.vendorPerformance.values()),\n      priceHistory: this.priceHistory,\n      insights: this.getInsights(),\n      statistics: {\n        totalRFPs: this.historicalData.length,\n        totalVendors: this.vendorPerformance.size,\n        overallWinRate: this.calculateOverallWinRate()\n      }\n    };\n  }\n\n  // Calculate overall win rate\n  calculateOverallWinRate() {\n    const total = this.historicalData.length;\n    if (total === 0) return 0;\n    const wins = this.historicalData.filter(rfp => rfp.status === 'Won').length;\n    return wins / total * 100;\n  }\n}\n\n// Create singleton instance\nexport const historicalDataAnalyzer = new HistoricalDataAnalyzer();\n\n// Initialize with mock historical data\nexport function initializeHistoricalData() {\n  const mockData = [{\n    id: 'H001',\n    rfpTitle: 'Office Complex',\n    vendor: 'Asian Paints',\n    finalPrice: 95000,\n    matchScore: 92,\n    status: 'Won',\n    area: 50000,\n    deadline: '2024-10-15',\n    responseTime: 2.5\n  }, {\n    id: 'H002',\n    rfpTitle: 'Residential Tower',\n    vendor: 'Berger Paints',\n    finalPrice: 67500,\n    matchScore: 78,\n    status: 'Lost',\n    area: 35000,\n    deadline: '2024-10-08',\n    responseTime: 3.2\n  }, {\n    id: 'H003',\n    rfpTitle: 'Industrial Facility',\n    vendor: 'Nerolac Paints',\n    finalPrice: 134000,\n    matchScore: 89,\n    status: 'Pending',\n    area: 75000,\n    deadline: '2024-09-28',\n    responseTime: 2.8\n  }, {\n    id: 'H004',\n    rfpTitle: 'School Building',\n    vendor: 'Asian Paints',\n    finalPrice: 52000,\n    matchScore: 88,\n    status: 'Won',\n    area: 28000,\n    deadline: '2024-09-15',\n    responseTime: 2.1\n  }, {\n    id: 'H005',\n    rfpTitle: 'Hospital Wing',\n    vendor: 'Berger Paints',\n    finalPrice: 112000,\n    matchScore: 94,\n    status: 'Won',\n    area: 62000,\n    deadline: '2024-08-30',\n    responseTime: 2.4\n  }, {\n    id: 'H006',\n    rfpTitle: 'Shopping Mall',\n    vendor: 'Asian Paints',\n    finalPrice: 185000,\n    matchScore: 85,\n    status: 'Lost',\n    area: 95000,\n    deadline: '2024-08-20',\n    responseTime: 3.5\n  }, {\n    id: 'H007',\n    rfpTitle: 'Apartment Complex',\n    vendor: 'Nerolac Paints',\n    finalPrice: 78000,\n    matchScore: 91,\n    status: 'Won',\n    area: 42000,\n    deadline: '2024-07-25',\n    responseTime: 2.2\n  }, {\n    id: 'H008',\n    rfpTitle: 'Government Office',\n    vendor: 'Berger Paints',\n    finalPrice: 145000,\n    matchScore: 87,\n    status: 'Won',\n    area: 80000,\n    deadline: '2024-07-10',\n    responseTime: 2.9\n  }];\n  mockData.forEach(data => historicalDataAnalyzer.addHistoricalRFP(data));\n  return historicalDataAnalyzer;\n}","map":{"version":3,"names":["HistoricalDataAnalyzer","constructor","historicalData","vendorPerformance","Map","priceHistory","winPatterns","addHistoricalRFP","rfpData","record","id","Date","now","timestamp","toISOString","rfpTitle","vendor","finalPrice","matchScore","status","area","requirements","deadline","responseTime","push","updateVendorPerformance","updatePriceHistory","updateWinPatterns","has","set","totalBids","wins","losses","pending","totalValue","avgMatchScore","avgPrice","avgResponseTime","matchScores","prices","responseTimes","performance","get","reduce","a","b","length","winRate","price","pricePerSqFt","shift","won","getVendorPerformance","vendorName","getRankedVendors","vendors","Array","from","values","sort","predictWinProbability","calculateBaselineWinProbability","similarCases","filter","pattern","matchScoreDiff","Math","abs","priceDiff","c","historicalWinRate","vendorPerf","vendorAdjustment","min","max","probability","forecastPrice","forecast","confidence","message","relevantHistory","h","avgPricePerSqFt","sum","trend","calculatePriceTrend","basePrice","trendAdjustment","variance","calculateVariance","map","round","toFixed","dataPoints","recentPrices","slice","n","sumX","sumY","sumXY","sumX2","forEach","point","i","slope","mean","squaredDiffs","value","pow","getInsights","insights","topVendor","type","data","avgRecent","olderPrices","avgOlder","change","wonCases","p","avgWinningMatchScore","totalWins","exportData","historicalRFPs","statistics","totalRFPs","totalVendors","size","overallWinRate","calculateOverallWinRate","total","rfp","historicalDataAnalyzer","initializeHistoricalData","mockData"],"sources":["C:/Users/BIT/Downloads/RFP/src/utils/HistoricalDataAnalyzer.js"],"sourcesContent":["// Historical Data Analyzer - Learn from past RFPs\r\nexport class HistoricalDataAnalyzer {\r\n  constructor() {\r\n    this.historicalData = [];\r\n    this.vendorPerformance = new Map();\r\n    this.priceHistory = [];\r\n    this.winPatterns = [];\r\n  }\r\n  \r\n  // Add historical RFP data\r\n  addHistoricalRFP(rfpData) {\r\n    const record = {\r\n      id: rfpData.id || `HIST_${Date.now()}`,\r\n      timestamp: rfpData.timestamp || new Date().toISOString(),\r\n      rfpTitle: rfpData.rfpTitle,\r\n      vendor: rfpData.vendor,\r\n      finalPrice: rfpData.finalPrice,\r\n      matchScore: rfpData.matchScore,\r\n      status: rfpData.status, // 'Won', 'Lost', 'Pending'\r\n      area: rfpData.area,\r\n      requirements: rfpData.requirements,\r\n      deadline: rfpData.deadline,\r\n      responseTime: rfpData.responseTime\r\n    };\r\n    \r\n    this.historicalData.push(record);\r\n    this.updateVendorPerformance(record);\r\n    this.updatePriceHistory(record);\r\n    \r\n    if (record.status === 'Won' || record.status === 'Lost') {\r\n      this.updateWinPatterns(record);\r\n    }\r\n  }\r\n  \r\n  // Update vendor performance metrics\r\n  updateVendorPerformance(record) {\r\n    if (!this.vendorPerformance.has(record.vendor)) {\r\n      this.vendorPerformance.set(record.vendor, {\r\n        vendor: record.vendor,\r\n        totalBids: 0,\r\n        wins: 0,\r\n        losses: 0,\r\n        pending: 0,\r\n        totalValue: 0,\r\n        avgMatchScore: 0,\r\n        avgPrice: 0,\r\n        avgResponseTime: 0,\r\n        matchScores: [],\r\n        prices: [],\r\n        responseTimes: []\r\n      });\r\n    }\r\n    \r\n    const performance = this.vendorPerformance.get(record.vendor);\r\n    performance.totalBids++;\r\n    \r\n    if (record.status === 'Won') performance.wins++;\r\n    if (record.status === 'Lost') performance.losses++;\r\n    if (record.status === 'Pending') performance.pending++;\r\n    \r\n    performance.totalValue += record.finalPrice || 0;\r\n    performance.matchScores.push(record.matchScore);\r\n    performance.prices.push(record.finalPrice);\r\n    if (record.responseTime) performance.responseTimes.push(record.responseTime);\r\n    \r\n    // Calculate averages\r\n    performance.avgMatchScore = performance.matchScores.reduce((a, b) => a + b, 0) / performance.matchScores.length;\r\n    performance.avgPrice = performance.prices.reduce((a, b) => a + b, 0) / performance.prices.length;\r\n    performance.avgResponseTime = performance.responseTimes.length > 0\r\n      ? performance.responseTimes.reduce((a, b) => a + b, 0) / performance.responseTimes.length\r\n      : 0;\r\n    performance.winRate = performance.totalBids > 0 ? (performance.wins / performance.totalBids) * 100 : 0;\r\n  }\r\n  \r\n  // Update price history for forecasting\r\n  updatePriceHistory(record) {\r\n    this.priceHistory.push({\r\n      timestamp: record.timestamp,\r\n      vendor: record.vendor,\r\n      price: record.finalPrice,\r\n      area: record.area,\r\n      pricePerSqFt: record.area > 0 ? record.finalPrice / record.area : 0\r\n    });\r\n    \r\n    // Keep only last 100 records for performance\r\n    if (this.priceHistory.length > 100) {\r\n      this.priceHistory.shift();\r\n    }\r\n  }\r\n  \r\n  // Update win patterns\r\n  updateWinPatterns(record) {\r\n    this.winPatterns.push({\r\n      matchScore: record.matchScore,\r\n      price: record.finalPrice,\r\n      area: record.area,\r\n      vendor: record.vendor,\r\n      won: record.status === 'Won'\r\n    });\r\n  }\r\n  \r\n  // Get vendor performance report\r\n  getVendorPerformance(vendorName) {\r\n    return this.vendorPerformance.get(vendorName) || null;\r\n  }\r\n  \r\n  // Get all vendor performances ranked\r\n  getRankedVendors() {\r\n    const vendors = Array.from(this.vendorPerformance.values());\r\n    return vendors.sort((a, b) => b.winRate - a.winRate);\r\n  }\r\n  \r\n  // Predict win probability based on historical data\r\n  predictWinProbability(matchScore, price, vendor) {\r\n    if (this.winPatterns.length < 5) {\r\n      // Not enough data, use baseline\r\n      return this.calculateBaselineWinProbability(matchScore, price);\r\n    }\r\n    \r\n    // Find similar historical cases\r\n    const similarCases = this.winPatterns.filter(pattern => {\r\n      const matchScoreDiff = Math.abs(pattern.matchScore - matchScore);\r\n      const priceDiff = Math.abs(pattern.price - price) / price;\r\n      \r\n      return matchScoreDiff < 15 && priceDiff < 0.3;\r\n    });\r\n    \r\n    if (similarCases.length === 0) {\r\n      return this.calculateBaselineWinProbability(matchScore, price);\r\n    }\r\n    \r\n    // Calculate win rate from similar cases\r\n    const wins = similarCases.filter(c => c.won).length;\r\n    const historicalWinRate = (wins / similarCases.length) * 100;\r\n    \r\n    // Adjust based on vendor performance\r\n    const vendorPerf = this.getVendorPerformance(vendor);\r\n    const vendorAdjustment = vendorPerf ? (vendorPerf.winRate - 50) * 0.2 : 0;\r\n    \r\n    return Math.min(Math.max(historicalWinRate + vendorAdjustment, 0), 100);\r\n  }\r\n  \r\n  // Calculate baseline win probability\r\n  calculateBaselineWinProbability(matchScore, price) {\r\n    // Simple heuristic when no historical data\r\n    let probability = 50; // Start at 50%\r\n    \r\n    // Match score contribution\r\n    if (matchScore >= 90) probability += 30;\r\n    else if (matchScore >= 80) probability += 20;\r\n    else if (matchScore >= 70) probability += 10;\r\n    else if (matchScore < 60) probability -= 20;\r\n    \r\n    // Price contribution (assuming lower is better)\r\n    if (price < 50000) probability += 10;\r\n    else if (price > 100000) probability -= 10;\r\n    \r\n    return Math.min(Math.max(probability, 0), 100);\r\n  }\r\n  \r\n  // Forecast price trends\r\n  forecastPrice(area, vendor = null) {\r\n    if (this.priceHistory.length < 3) {\r\n      return { forecast: null, confidence: 'Low', message: 'Insufficient historical data' };\r\n    }\r\n    \r\n    // Filter by vendor if specified\r\n    let relevantHistory = vendor\r\n      ? this.priceHistory.filter(h => h.vendor === vendor)\r\n      : this.priceHistory;\r\n    \r\n    if (relevantHistory.length < 3) {\r\n      relevantHistory = this.priceHistory; // Fall back to all data\r\n    }\r\n    \r\n    // Calculate average price per sq ft\r\n    const avgPricePerSqFt = relevantHistory.reduce((sum, h) => sum + h.pricePerSqFt, 0) / relevantHistory.length;\r\n    \r\n    // Calculate trend (simple linear regression)\r\n    const trend = this.calculatePriceTrend(relevantHistory);\r\n    \r\n    // Forecast\r\n    const basePrice = avgPricePerSqFt * area;\r\n    const trendAdjustment = trend * area;\r\n    const forecast = basePrice + trendAdjustment;\r\n    \r\n    // Calculate confidence based on data consistency\r\n    const variance = this.calculateVariance(relevantHistory.map(h => h.pricePerSqFt));\r\n    const confidence = variance < 10 ? 'High' : variance < 50 ? 'Medium' : 'Low';\r\n    \r\n    return {\r\n      forecast: Math.round(forecast),\r\n      basePrice: Math.round(basePrice),\r\n      trendAdjustment: Math.round(trendAdjustment),\r\n      avgPricePerSqFt: avgPricePerSqFt.toFixed(2),\r\n      confidence: confidence,\r\n      dataPoints: relevantHistory.length,\r\n      trend: trend > 0 ? 'Increasing' : trend < 0 ? 'Decreasing' : 'Stable'\r\n    };\r\n  }\r\n  \r\n  // Calculate price trend\r\n  calculatePriceTrend(priceHistory) {\r\n    if (priceHistory.length < 2) return 0;\r\n    \r\n    const recentPrices = priceHistory.slice(-10); // Last 10 data points\r\n    const n = recentPrices.length;\r\n    \r\n    let sumX = 0, sumY = 0, sumXY = 0, sumX2 = 0;\r\n    \r\n    recentPrices.forEach((point, i) => {\r\n      sumX += i;\r\n      sumY += point.pricePerSqFt;\r\n      sumXY += i * point.pricePerSqFt;\r\n      sumX2 += i * i;\r\n    });\r\n    \r\n    const slope = (n * sumXY - sumX * sumY) / (n * sumX2 - sumX * sumX);\r\n    return slope;\r\n  }\r\n  \r\n  // Calculate variance\r\n  calculateVariance(values) {\r\n    const mean = values.reduce((a, b) => a + b, 0) / values.length;\r\n    const squaredDiffs = values.map(value => Math.pow(value - mean, 2));\r\n    return squaredDiffs.reduce((a, b) => a + b, 0) / values.length;\r\n  }\r\n  \r\n  // Get insights from historical data\r\n  getInsights() {\r\n    const insights = [];\r\n    \r\n    // Vendor insights\r\n    const topVendor = this.getRankedVendors()[0];\r\n    if (topVendor) {\r\n      insights.push({\r\n        type: 'vendor_performance',\r\n        message: `${topVendor.vendor} has the highest win rate at ${topVendor.winRate.toFixed(1)}%`,\r\n        data: topVendor\r\n      });\r\n    }\r\n    \r\n    // Price insights\r\n    if (this.priceHistory.length >= 5) {\r\n      const recentPrices = this.priceHistory.slice(-5);\r\n      const avgRecent = recentPrices.reduce((sum, h) => sum + h.pricePerSqFt, 0) / recentPrices.length;\r\n      const olderPrices = this.priceHistory.slice(0, -5);\r\n      const avgOlder = olderPrices.reduce((sum, h) => sum + h.pricePerSqFt, 0) / olderPrices.length;\r\n      \r\n      const change = ((avgRecent - avgOlder) / avgOlder) * 100;\r\n      \r\n      if (Math.abs(change) > 5) {\r\n        insights.push({\r\n          type: 'price_trend',\r\n          message: `Prices have ${change > 0 ? 'increased' : 'decreased'} by ${Math.abs(change).toFixed(1)}% recently`,\r\n          data: { change, avgRecent, avgOlder }\r\n        });\r\n      }\r\n    }\r\n    \r\n    // Win pattern insights\r\n    if (this.winPatterns.length >= 10) {\r\n      const wonCases = this.winPatterns.filter(p => p.won);\r\n      const avgWinningMatchScore = wonCases.reduce((sum, p) => sum + p.matchScore, 0) / wonCases.length;\r\n      \r\n      insights.push({\r\n        type: 'win_pattern',\r\n        message: `RFPs with match scores above ${avgWinningMatchScore.toFixed(0)}% have higher win rates`,\r\n        data: { avgWinningMatchScore, totalWins: wonCases.length }\r\n      });\r\n    }\r\n    \r\n    return insights;\r\n  }\r\n  \r\n  // Export historical data\r\n  exportData() {\r\n    return {\r\n      historicalRFPs: this.historicalData,\r\n      vendorPerformance: Array.from(this.vendorPerformance.values()),\r\n      priceHistory: this.priceHistory,\r\n      insights: this.getInsights(),\r\n      statistics: {\r\n        totalRFPs: this.historicalData.length,\r\n        totalVendors: this.vendorPerformance.size,\r\n        overallWinRate: this.calculateOverallWinRate()\r\n      }\r\n    };\r\n  }\r\n  \r\n  // Calculate overall win rate\r\n  calculateOverallWinRate() {\r\n    const total = this.historicalData.length;\r\n    if (total === 0) return 0;\r\n    \r\n    const wins = this.historicalData.filter(rfp => rfp.status === 'Won').length;\r\n    return (wins / total) * 100;\r\n  }\r\n}\r\n\r\n// Create singleton instance\r\nexport const historicalDataAnalyzer = new HistoricalDataAnalyzer();\r\n\r\n// Initialize with mock historical data\r\nexport function initializeHistoricalData() {\r\n  const mockData = [\r\n    { id: 'H001', rfpTitle: 'Office Complex', vendor: 'Asian Paints', finalPrice: 95000, matchScore: 92, status: 'Won', area: 50000, deadline: '2024-10-15', responseTime: 2.5 },\r\n    { id: 'H002', rfpTitle: 'Residential Tower', vendor: 'Berger Paints', finalPrice: 67500, matchScore: 78, status: 'Lost', area: 35000, deadline: '2024-10-08', responseTime: 3.2 },\r\n    { id: 'H003', rfpTitle: 'Industrial Facility', vendor: 'Nerolac Paints', finalPrice: 134000, matchScore: 89, status: 'Pending', area: 75000, deadline: '2024-09-28', responseTime: 2.8 },\r\n    { id: 'H004', rfpTitle: 'School Building', vendor: 'Asian Paints', finalPrice: 52000, matchScore: 88, status: 'Won', area: 28000, deadline: '2024-09-15', responseTime: 2.1 },\r\n    { id: 'H005', rfpTitle: 'Hospital Wing', vendor: 'Berger Paints', finalPrice: 112000, matchScore: 94, status: 'Won', area: 62000, deadline: '2024-08-30', responseTime: 2.4 },\r\n    { id: 'H006', rfpTitle: 'Shopping Mall', vendor: 'Asian Paints', finalPrice: 185000, matchScore: 85, status: 'Lost', area: 95000, deadline: '2024-08-20', responseTime: 3.5 },\r\n    { id: 'H007', rfpTitle: 'Apartment Complex', vendor: 'Nerolac Paints', finalPrice: 78000, matchScore: 91, status: 'Won', area: 42000, deadline: '2024-07-25', responseTime: 2.2 },\r\n    { id: 'H008', rfpTitle: 'Government Office', vendor: 'Berger Paints', finalPrice: 145000, matchScore: 87, status: 'Won', area: 80000, deadline: '2024-07-10', responseTime: 2.9 }\r\n  ];\r\n  \r\n  mockData.forEach(data => historicalDataAnalyzer.addHistoricalRFP(data));\r\n  \r\n  return historicalDataAnalyzer;\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}