{"ast":null,"code":"// Confidence-based Escalation - Flag low-confidence decisions for human review\nexport class ConfidenceEscalation {\n  constructor() {\n    this.thresholds = {\n      matchScore: 0.85,\n      // 85% match score threshold\n      winProbability: 0.70,\n      // 70% win probability threshold\n      priceVariance: 0.20,\n      // 20% price variance threshold\n      reliability: 0.90 // 90% reliability threshold\n    };\n    this.escalations = [];\n  }\n\n  // Evaluate if RFP response needs human review\n  evaluateConfidence(rfpAnalysis) {\n    var _rfpAnalysis$winProba, _rfpAnalysis$pricingD, _rfpAnalysis$analysis, _rfpAnalysis$analysis2, _rfpAnalysis$analysis3;\n    const issues = [];\n    let overallConfidence = 1.0;\n    let needsReview = false;\n\n    // Check match score\n    const matchScore = rfpAnalysis.overallMatchScore / 100;\n    if (matchScore < this.thresholds.matchScore) {\n      issues.push({\n        type: 'LOW_MATCH_SCORE',\n        severity: 'HIGH',\n        message: `Match score ${(matchScore * 100).toFixed(0)}% is below threshold of ${(this.thresholds.matchScore * 100).toFixed(0)}%`,\n        value: matchScore,\n        threshold: this.thresholds.matchScore,\n        recommendation: 'Review technical specifications and vendor selection'\n      });\n      overallConfidence *= 0.7;\n      needsReview = true;\n    }\n\n    // Check win probability\n    const winProb = (((_rfpAnalysis$winProba = rfpAnalysis.winProbability) === null || _rfpAnalysis$winProba === void 0 ? void 0 : _rfpAnalysis$winProba.probability) || 0) / 100;\n    if (winProb < this.thresholds.winProbability) {\n      issues.push({\n        type: 'LOW_WIN_PROBABILITY',\n        severity: winProb < 0.5 ? 'HIGH' : 'MEDIUM',\n        message: `Win probability ${(winProb * 100).toFixed(0)}% is below threshold of ${(this.thresholds.winProbability * 100).toFixed(0)}%`,\n        value: winProb,\n        threshold: this.thresholds.winProbability,\n        recommendation: 'Review pricing strategy and competitive positioning'\n      });\n      overallConfidence *= 0.8;\n      needsReview = true;\n    }\n\n    // Check vendor reliability\n    const reliability = (((_rfpAnalysis$pricingD = rfpAnalysis.pricingDetails) === null || _rfpAnalysis$pricingD === void 0 ? void 0 : _rfpAnalysis$pricingD.avgReliability) || 0) / 100;\n    if (reliability < this.thresholds.reliability) {\n      issues.push({\n        type: 'LOW_RELIABILITY',\n        severity: 'MEDIUM',\n        message: `Vendor reliability ${(reliability * 100).toFixed(0)}% is below threshold of ${(this.thresholds.reliability * 100).toFixed(0)}%`,\n        value: reliability,\n        threshold: this.thresholds.reliability,\n        recommendation: 'Consider alternative vendors or request quality guarantees'\n      });\n      overallConfidence *= 0.85;\n      needsReview = true;\n    }\n\n    // Check price variance across vendors\n    if (rfpAnalysis.vendorQuotes) {\n      const prices = Object.values(rfpAnalysis.vendorQuotes).map(q => q.finalPrice);\n      if (prices.length > 1) {\n        const avgPrice = prices.reduce((a, b) => a + b, 0) / prices.length;\n        const maxVariance = Math.max(...prices.map(p => Math.abs(p - avgPrice) / avgPrice));\n        if (maxVariance > this.thresholds.priceVariance) {\n          issues.push({\n            type: 'HIGH_PRICE_VARIANCE',\n            severity: 'MEDIUM',\n            message: `Price variance ${(maxVariance * 100).toFixed(0)}% exceeds threshold of ${(this.thresholds.priceVariance * 100).toFixed(0)}%`,\n            value: maxVariance,\n            threshold: this.thresholds.priceVariance,\n            recommendation: 'Verify pricing calculations and vendor quotes'\n          });\n          overallConfidence *= 0.9;\n          needsReview = true;\n        }\n      }\n    }\n\n    // Check deadline risk\n    if (((_rfpAnalysis$analysis = rfpAnalysis.analysis) === null || _rfpAnalysis$analysis === void 0 ? void 0 : _rfpAnalysis$analysis.riskLevel) === 'High') {\n      issues.push({\n        type: 'HIGH_DEADLINE_RISK',\n        severity: 'HIGH',\n        message: 'Tight deadline poses high delivery risk',\n        recommendation: 'Confirm vendor can meet deadline or negotiate extension'\n      });\n      overallConfidence *= 0.85;\n      needsReview = true;\n    }\n\n    // Check complexity\n    if (((_rfpAnalysis$analysis2 = rfpAnalysis.analysis) === null || _rfpAnalysis$analysis2 === void 0 ? void 0 : _rfpAnalysis$analysis2.complexity) === 'High' || ((_rfpAnalysis$analysis3 = rfpAnalysis.analysis) === null || _rfpAnalysis$analysis3 === void 0 ? void 0 : _rfpAnalysis$analysis3.complexity) === 'Very High') {\n      issues.push({\n        type: 'HIGH_COMPLEXITY',\n        severity: 'MEDIUM',\n        message: `RFP complexity is ${rfpAnalysis.analysis.complexity}`,\n        recommendation: 'Review technical requirements with subject matter experts'\n      });\n      overallConfidence *= 0.9;\n    }\n    const escalation = {\n      id: `ESC_${Date.now()}`,\n      timestamp: new Date().toISOString(),\n      rfpId: rfpAnalysis.rfpId,\n      rfpTitle: rfpAnalysis.rfpTitle || 'Untitled RFP',\n      needsReview: needsReview,\n      overallConfidence: overallConfidence,\n      confidenceLevel: this.getConfidenceLevel(overallConfidence),\n      issues: issues,\n      summary: this.generateSummary(needsReview, overallConfidence, issues),\n      reviewPriority: this.calculatePriority(issues)\n    };\n    if (needsReview) {\n      this.escalations.push(escalation);\n      console.log(`âš ï¸ ESCALATION: Human review needed for RFP \"${escalation.rfpTitle}\"`);\n      console.log(`   Confidence: ${(overallConfidence * 100).toFixed(0)}% | Issues: ${issues.length}`);\n      issues.forEach(issue => {\n        console.log(`   - [${issue.severity}] ${issue.message}`);\n      });\n    } else {\n      console.log(`âœ… CONFIDENCE: RFP \"${escalation.rfpTitle}\" passed all thresholds`);\n      console.log(`   Confidence: ${(overallConfidence * 100).toFixed(0)}% | No issues detected`);\n    }\n    return escalation;\n  }\n\n  // Get confidence level label\n  getConfidenceLevel(confidence) {\n    if (confidence >= 0.95) return 'VERY_HIGH';\n    if (confidence >= 0.85) return 'HIGH';\n    if (confidence >= 0.70) return 'MEDIUM';\n    if (confidence >= 0.50) return 'LOW';\n    return 'VERY_LOW';\n  }\n\n  // Calculate review priority\n  calculatePriority(issues) {\n    const highSeverity = issues.filter(i => i.severity === 'HIGH').length;\n    const mediumSeverity = issues.filter(i => i.severity === 'MEDIUM').length;\n    if (highSeverity >= 2) return 'URGENT';\n    if (highSeverity >= 1) return 'HIGH';\n    if (mediumSeverity >= 2) return 'MEDIUM';\n    return 'LOW';\n  }\n\n  // Generate summary message\n  generateSummary(needsReview, confidence, issues) {\n    if (!needsReview) {\n      return `All confidence thresholds met. Automated response approved with ${(confidence * 100).toFixed(0)}% confidence.`;\n    }\n    const highIssues = issues.filter(i => i.severity === 'HIGH').length;\n    const mediumIssues = issues.filter(i => i.severity === 'MEDIUM').length;\n    let summary = `Human review required. Overall confidence: ${(confidence * 100).toFixed(0)}%. `;\n    if (highIssues > 0) {\n      summary += `${highIssues} high-severity issue${highIssues > 1 ? 's' : ''} detected. `;\n    }\n    if (mediumIssues > 0) {\n      summary += `${mediumIssues} medium-severity issue${mediumIssues > 1 ? 's' : ''} detected. `;\n    }\n    return summary;\n  }\n\n  // Get all pending escalations\n  getPendingEscalations() {\n    return this.escalations.filter(e => e.needsReview);\n  }\n\n  // Get escalation statistics\n  getStatistics() {\n    const total = this.escalations.length;\n    const needsReview = this.escalations.filter(e => e.needsReview).length;\n    const approved = total - needsReview;\n    const avgConfidence = total > 0 ? this.escalations.reduce((sum, e) => sum + e.overallConfidence, 0) / total : 0;\n    const priorityCounts = {\n      URGENT: this.escalations.filter(e => e.reviewPriority === 'URGENT').length,\n      HIGH: this.escalations.filter(e => e.reviewPriority === 'HIGH').length,\n      MEDIUM: this.escalations.filter(e => e.reviewPriority === 'MEDIUM').length,\n      LOW: this.escalations.filter(e => e.reviewPriority === 'LOW').length\n    };\n    return {\n      totalEvaluated: total,\n      needsReview: needsReview,\n      autoApproved: approved,\n      approvalRate: total > 0 ? (approved / total * 100).toFixed(1) : 0,\n      avgConfidence: (avgConfidence * 100).toFixed(1),\n      priorityCounts: priorityCounts\n    };\n  }\n\n  // Update thresholds\n  updateThresholds(newThresholds) {\n    Object.assign(this.thresholds, newThresholds);\n    console.log('ðŸŽ¯ Confidence thresholds updated:', this.thresholds);\n  }\n\n  // Clear escalation history\n  clearHistory() {\n    this.escalations = [];\n    console.log('ðŸ—‘ï¸ Escalation history cleared');\n  }\n\n  // Export escalations\n  exportEscalations() {\n    return this.escalations;\n  }\n\n  // Generate human review report\n  generateReviewReport(escalation) {\n    const report = {\n      title: 'HUMAN REVIEW REQUIRED',\n      rfpId: escalation.rfpId,\n      rfpTitle: escalation.rfpTitle,\n      timestamp: escalation.timestamp,\n      priority: escalation.reviewPriority,\n      confidence: `${(escalation.overallConfidence * 100).toFixed(0)}%`,\n      confidenceLevel: escalation.confidenceLevel,\n      summary: escalation.summary,\n      issues: escalation.issues.map(issue => ({\n        type: issue.type,\n        severity: issue.severity,\n        message: issue.message,\n        recommendation: issue.recommendation\n      })),\n      actionRequired: this.getActionRequired(escalation)\n    };\n    return report;\n  }\n\n  // Get required actions\n  getActionRequired(escalation) {\n    const actions = [];\n    escalation.issues.forEach(issue => {\n      switch (issue.type) {\n        case 'LOW_MATCH_SCORE':\n          actions.push('Review and adjust technical specifications');\n          actions.push('Consider alternative vendors or products');\n          break;\n        case 'LOW_WIN_PROBABILITY':\n          actions.push('Optimize pricing strategy');\n          actions.push('Review competitive positioning');\n          break;\n        case 'LOW_RELIABILITY':\n          actions.push('Verify vendor credentials and past performance');\n          actions.push('Request quality guarantees or certifications');\n          break;\n        case 'HIGH_PRICE_VARIANCE':\n          actions.push('Verify all pricing calculations');\n          actions.push('Investigate reasons for price differences');\n          break;\n        case 'HIGH_DEADLINE_RISK':\n          actions.push('Confirm delivery timeline with vendor');\n          actions.push('Consider requesting deadline extension');\n          break;\n        case 'HIGH_COMPLEXITY':\n          actions.push('Consult with technical experts');\n          actions.push('Break down complex requirements');\n          break;\n      }\n    });\n    return [...new Set(actions)]; // Remove duplicates\n  }\n}\n\n// Create singleton instance\nexport const confidenceEscalation = new ConfidenceEscalation();","map":{"version":3,"names":["ConfidenceEscalation","constructor","thresholds","matchScore","winProbability","priceVariance","reliability","escalations","evaluateConfidence","rfpAnalysis","_rfpAnalysis$winProba","_rfpAnalysis$pricingD","_rfpAnalysis$analysis","_rfpAnalysis$analysis2","_rfpAnalysis$analysis3","issues","overallConfidence","needsReview","overallMatchScore","push","type","severity","message","toFixed","value","threshold","recommendation","winProb","probability","pricingDetails","avgReliability","vendorQuotes","prices","Object","values","map","q","finalPrice","length","avgPrice","reduce","a","b","maxVariance","Math","max","p","abs","analysis","riskLevel","complexity","escalation","id","Date","now","timestamp","toISOString","rfpId","rfpTitle","confidenceLevel","getConfidenceLevel","summary","generateSummary","reviewPriority","calculatePriority","console","log","forEach","issue","confidence","highSeverity","filter","i","mediumSeverity","highIssues","mediumIssues","getPendingEscalations","e","getStatistics","total","approved","avgConfidence","sum","priorityCounts","URGENT","HIGH","MEDIUM","LOW","totalEvaluated","autoApproved","approvalRate","updateThresholds","newThresholds","assign","clearHistory","exportEscalations","generateReviewReport","report","title","priority","actionRequired","getActionRequired","actions","Set","confidenceEscalation"],"sources":["C:/Users/BIT/Downloads/RFP/src/utils/ConfidenceEscalation.js"],"sourcesContent":["// Confidence-based Escalation - Flag low-confidence decisions for human review\r\nexport class ConfidenceEscalation {\r\n  constructor() {\r\n    this.thresholds = {\r\n      matchScore: 0.85, // 85% match score threshold\r\n      winProbability: 0.70, // 70% win probability threshold\r\n      priceVariance: 0.20, // 20% price variance threshold\r\n      reliability: 0.90 // 90% reliability threshold\r\n    };\r\n    \r\n    this.escalations = [];\r\n  }\r\n\r\n  // Evaluate if RFP response needs human review\r\n  evaluateConfidence(rfpAnalysis) {\r\n    const issues = [];\r\n    let overallConfidence = 1.0;\r\n    let needsReview = false;\r\n\r\n    // Check match score\r\n    const matchScore = rfpAnalysis.overallMatchScore / 100;\r\n    if (matchScore < this.thresholds.matchScore) {\r\n      issues.push({\r\n        type: 'LOW_MATCH_SCORE',\r\n        severity: 'HIGH',\r\n        message: `Match score ${(matchScore * 100).toFixed(0)}% is below threshold of ${(this.thresholds.matchScore * 100).toFixed(0)}%`,\r\n        value: matchScore,\r\n        threshold: this.thresholds.matchScore,\r\n        recommendation: 'Review technical specifications and vendor selection'\r\n      });\r\n      overallConfidence *= 0.7;\r\n      needsReview = true;\r\n    }\r\n\r\n    // Check win probability\r\n    const winProb = (rfpAnalysis.winProbability?.probability || 0) / 100;\r\n    if (winProb < this.thresholds.winProbability) {\r\n      issues.push({\r\n        type: 'LOW_WIN_PROBABILITY',\r\n        severity: winProb < 0.5 ? 'HIGH' : 'MEDIUM',\r\n        message: `Win probability ${(winProb * 100).toFixed(0)}% is below threshold of ${(this.thresholds.winProbability * 100).toFixed(0)}%`,\r\n        value: winProb,\r\n        threshold: this.thresholds.winProbability,\r\n        recommendation: 'Review pricing strategy and competitive positioning'\r\n      });\r\n      overallConfidence *= 0.8;\r\n      needsReview = true;\r\n    }\r\n\r\n    // Check vendor reliability\r\n    const reliability = (rfpAnalysis.pricingDetails?.avgReliability || 0) / 100;\r\n    if (reliability < this.thresholds.reliability) {\r\n      issues.push({\r\n        type: 'LOW_RELIABILITY',\r\n        severity: 'MEDIUM',\r\n        message: `Vendor reliability ${(reliability * 100).toFixed(0)}% is below threshold of ${(this.thresholds.reliability * 100).toFixed(0)}%`,\r\n        value: reliability,\r\n        threshold: this.thresholds.reliability,\r\n        recommendation: 'Consider alternative vendors or request quality guarantees'\r\n      });\r\n      overallConfidence *= 0.85;\r\n      needsReview = true;\r\n    }\r\n\r\n    // Check price variance across vendors\r\n    if (rfpAnalysis.vendorQuotes) {\r\n      const prices = Object.values(rfpAnalysis.vendorQuotes).map(q => q.finalPrice);\r\n      if (prices.length > 1) {\r\n        const avgPrice = prices.reduce((a, b) => a + b, 0) / prices.length;\r\n        const maxVariance = Math.max(...prices.map(p => Math.abs(p - avgPrice) / avgPrice));\r\n        \r\n        if (maxVariance > this.thresholds.priceVariance) {\r\n          issues.push({\r\n            type: 'HIGH_PRICE_VARIANCE',\r\n            severity: 'MEDIUM',\r\n            message: `Price variance ${(maxVariance * 100).toFixed(0)}% exceeds threshold of ${(this.thresholds.priceVariance * 100).toFixed(0)}%`,\r\n            value: maxVariance,\r\n            threshold: this.thresholds.priceVariance,\r\n            recommendation: 'Verify pricing calculations and vendor quotes'\r\n          });\r\n          overallConfidence *= 0.9;\r\n          needsReview = true;\r\n        }\r\n      }\r\n    }\r\n\r\n    // Check deadline risk\r\n    if (rfpAnalysis.analysis?.riskLevel === 'High') {\r\n      issues.push({\r\n        type: 'HIGH_DEADLINE_RISK',\r\n        severity: 'HIGH',\r\n        message: 'Tight deadline poses high delivery risk',\r\n        recommendation: 'Confirm vendor can meet deadline or negotiate extension'\r\n      });\r\n      overallConfidence *= 0.85;\r\n      needsReview = true;\r\n    }\r\n\r\n    // Check complexity\r\n    if (rfpAnalysis.analysis?.complexity === 'High' || rfpAnalysis.analysis?.complexity === 'Very High') {\r\n      issues.push({\r\n        type: 'HIGH_COMPLEXITY',\r\n        severity: 'MEDIUM',\r\n        message: `RFP complexity is ${rfpAnalysis.analysis.complexity}`,\r\n        recommendation: 'Review technical requirements with subject matter experts'\r\n      });\r\n      overallConfidence *= 0.9;\r\n    }\r\n\r\n    const escalation = {\r\n      id: `ESC_${Date.now()}`,\r\n      timestamp: new Date().toISOString(),\r\n      rfpId: rfpAnalysis.rfpId,\r\n      rfpTitle: rfpAnalysis.rfpTitle || 'Untitled RFP',\r\n      needsReview: needsReview,\r\n      overallConfidence: overallConfidence,\r\n      confidenceLevel: this.getConfidenceLevel(overallConfidence),\r\n      issues: issues,\r\n      summary: this.generateSummary(needsReview, overallConfidence, issues),\r\n      reviewPriority: this.calculatePriority(issues)\r\n    };\r\n\r\n    if (needsReview) {\r\n      this.escalations.push(escalation);\r\n      console.log(`âš ï¸ ESCALATION: Human review needed for RFP \"${escalation.rfpTitle}\"`);\r\n      console.log(`   Confidence: ${(overallConfidence * 100).toFixed(0)}% | Issues: ${issues.length}`);\r\n      issues.forEach(issue => {\r\n        console.log(`   - [${issue.severity}] ${issue.message}`);\r\n      });\r\n    } else {\r\n      console.log(`âœ… CONFIDENCE: RFP \"${escalation.rfpTitle}\" passed all thresholds`);\r\n      console.log(`   Confidence: ${(overallConfidence * 100).toFixed(0)}% | No issues detected`);\r\n    }\r\n\r\n    return escalation;\r\n  }\r\n\r\n  // Get confidence level label\r\n  getConfidenceLevel(confidence) {\r\n    if (confidence >= 0.95) return 'VERY_HIGH';\r\n    if (confidence >= 0.85) return 'HIGH';\r\n    if (confidence >= 0.70) return 'MEDIUM';\r\n    if (confidence >= 0.50) return 'LOW';\r\n    return 'VERY_LOW';\r\n  }\r\n\r\n  // Calculate review priority\r\n  calculatePriority(issues) {\r\n    const highSeverity = issues.filter(i => i.severity === 'HIGH').length;\r\n    const mediumSeverity = issues.filter(i => i.severity === 'MEDIUM').length;\r\n\r\n    if (highSeverity >= 2) return 'URGENT';\r\n    if (highSeverity >= 1) return 'HIGH';\r\n    if (mediumSeverity >= 2) return 'MEDIUM';\r\n    return 'LOW';\r\n  }\r\n\r\n  // Generate summary message\r\n  generateSummary(needsReview, confidence, issues) {\r\n    if (!needsReview) {\r\n      return `All confidence thresholds met. Automated response approved with ${(confidence * 100).toFixed(0)}% confidence.`;\r\n    }\r\n\r\n    const highIssues = issues.filter(i => i.severity === 'HIGH').length;\r\n    const mediumIssues = issues.filter(i => i.severity === 'MEDIUM').length;\r\n\r\n    let summary = `Human review required. Overall confidence: ${(confidence * 100).toFixed(0)}%. `;\r\n    \r\n    if (highIssues > 0) {\r\n      summary += `${highIssues} high-severity issue${highIssues > 1 ? 's' : ''} detected. `;\r\n    }\r\n    if (mediumIssues > 0) {\r\n      summary += `${mediumIssues} medium-severity issue${mediumIssues > 1 ? 's' : ''} detected. `;\r\n    }\r\n\r\n    return summary;\r\n  }\r\n\r\n  // Get all pending escalations\r\n  getPendingEscalations() {\r\n    return this.escalations.filter(e => e.needsReview);\r\n  }\r\n\r\n  // Get escalation statistics\r\n  getStatistics() {\r\n    const total = this.escalations.length;\r\n    const needsReview = this.escalations.filter(e => e.needsReview).length;\r\n    const approved = total - needsReview;\r\n\r\n    const avgConfidence = total > 0\r\n      ? this.escalations.reduce((sum, e) => sum + e.overallConfidence, 0) / total\r\n      : 0;\r\n\r\n    const priorityCounts = {\r\n      URGENT: this.escalations.filter(e => e.reviewPriority === 'URGENT').length,\r\n      HIGH: this.escalations.filter(e => e.reviewPriority === 'HIGH').length,\r\n      MEDIUM: this.escalations.filter(e => e.reviewPriority === 'MEDIUM').length,\r\n      LOW: this.escalations.filter(e => e.reviewPriority === 'LOW').length\r\n    };\r\n\r\n    return {\r\n      totalEvaluated: total,\r\n      needsReview: needsReview,\r\n      autoApproved: approved,\r\n      approvalRate: total > 0 ? ((approved / total) * 100).toFixed(1) : 0,\r\n      avgConfidence: (avgConfidence * 100).toFixed(1),\r\n      priorityCounts: priorityCounts\r\n    };\r\n  }\r\n\r\n  // Update thresholds\r\n  updateThresholds(newThresholds) {\r\n    Object.assign(this.thresholds, newThresholds);\r\n    console.log('ðŸŽ¯ Confidence thresholds updated:', this.thresholds);\r\n  }\r\n\r\n  // Clear escalation history\r\n  clearHistory() {\r\n    this.escalations = [];\r\n    console.log('ðŸ—‘ï¸ Escalation history cleared');\r\n  }\r\n\r\n  // Export escalations\r\n  exportEscalations() {\r\n    return this.escalations;\r\n  }\r\n\r\n  // Generate human review report\r\n  generateReviewReport(escalation) {\r\n    const report = {\r\n      title: 'HUMAN REVIEW REQUIRED',\r\n      rfpId: escalation.rfpId,\r\n      rfpTitle: escalation.rfpTitle,\r\n      timestamp: escalation.timestamp,\r\n      priority: escalation.reviewPriority,\r\n      confidence: `${(escalation.overallConfidence * 100).toFixed(0)}%`,\r\n      confidenceLevel: escalation.confidenceLevel,\r\n      summary: escalation.summary,\r\n      issues: escalation.issues.map(issue => ({\r\n        type: issue.type,\r\n        severity: issue.severity,\r\n        message: issue.message,\r\n        recommendation: issue.recommendation\r\n      })),\r\n      actionRequired: this.getActionRequired(escalation)\r\n    };\r\n\r\n    return report;\r\n  }\r\n\r\n  // Get required actions\r\n  getActionRequired(escalation) {\r\n    const actions = [];\r\n\r\n    escalation.issues.forEach(issue => {\r\n      switch (issue.type) {\r\n        case 'LOW_MATCH_SCORE':\r\n          actions.push('Review and adjust technical specifications');\r\n          actions.push('Consider alternative vendors or products');\r\n          break;\r\n        case 'LOW_WIN_PROBABILITY':\r\n          actions.push('Optimize pricing strategy');\r\n          actions.push('Review competitive positioning');\r\n          break;\r\n        case 'LOW_RELIABILITY':\r\n          actions.push('Verify vendor credentials and past performance');\r\n          actions.push('Request quality guarantees or certifications');\r\n          break;\r\n        case 'HIGH_PRICE_VARIANCE':\r\n          actions.push('Verify all pricing calculations');\r\n          actions.push('Investigate reasons for price differences');\r\n          break;\r\n        case 'HIGH_DEADLINE_RISK':\r\n          actions.push('Confirm delivery timeline with vendor');\r\n          actions.push('Consider requesting deadline extension');\r\n          break;\r\n        case 'HIGH_COMPLEXITY':\r\n          actions.push('Consult with technical experts');\r\n          actions.push('Break down complex requirements');\r\n          break;\r\n      }\r\n    });\r\n\r\n    return [...new Set(actions)]; // Remove duplicates\r\n  }\r\n}\r\n\r\n// Create singleton instance\r\nexport const confidenceEscalation = new ConfidenceEscalation();\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}